<!-- <app-hero-img></app-hero-img> -->

<main class="box">
  <div class="app-sidevar">
    <app-sidevar></app-sidevar>
  </div>
  
  <div class="products-container">
    <!-- Búsqueda y sugerencias -->
    <div class="search-suggestions" *ngIf="!isLoading && getSearchSuggestions().length > 0">
      <p class="suggestions-title">Quizás quisiste buscar:</p>
      <ul class="suggestions-list">
        <li class="suggestion-item" *ngFor="let suggestion of getSearchSuggestions()">
          <a class="suggestion-link" 
             (click)="searchQuery = suggestion.split(': ')[1]; applyFilters()">
            {{ suggestion }}
          </a>
        </li>
      </ul>



      <div *ngIf="query && !resultadosEncontrados">
        <h3>Todos los productos</h3>
        <div class="listado-productos">
          <div *ngFor="let producto of todosProductos" class="producto-card p-mb-4">
            <div class="ribbon">Nuevo</div>
            <div class="product-image">
              <img
                (click)="verDetalles(producto._id)"
                [src]="producto.imagenPrincipal"
                alt="{{ producto.nombre }}"
              />
            </div>
            <div class="product-content">
              <p>{{ producto.nombre }}</p>
              <p>MX$:<strong> {{ producto.precio | currency }}</strong></p>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Productos -->
      <div class="products-grid">
        <div *ngFor="let product of filteredProducts" class="product-card">
          <div class="card-badges">
            <span class="badge new-badge" *ngIf="product.nuevo">Nuevo</span>
            <span class="badge size-badge">{{ product.talla }}</span>
            <span class="badge color-badge">{{ product.color }}</span>
            <span class="badge neck-badge">{{ product.tipoCuello }}</span>
          </div>
          <div class="product-content">
            <p>{{ producto.nombre }}</p>
            <p>MX$:<strong> {{ producto.precio | currency }}</strong></p>
          </div>
        </div>
      </div>
    </div>

    <!-- Mostrar todos los productos solo si no hay query -->
    <div *ngIf="!query && !resultadosEncontrados">
      <h3>Todos los productos</h3>
      <div class="listado-productos">
        <div *ngFor="let producto of todosProductos" class="producto-card p-mb-4">
          <div class="ribbon">Nuevo</div>
          <div class="product-image">
            <img
              (click)="verDetalles(producto._id)"
              [src]="producto.imagenPrincipal"
              alt="{{ producto.nombre }}"
            />
          </div>
          <div class="product-content">
            <p>{{ producto.nombre }}</p>
            <p>MX$:<strong> {{ producto.precio | currency }}</strong></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>